{"ast":null,"code":"var _jsxFileName = \"/mnt/Data/Javascript_code/Ionic/coffe-db/src/components/frontend/add-items.js\";\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport { IonPage, IonCard, IonHeader, IonToolbar, IonBackButton, IonContent, IonTitle, IonButtons, IonTextarea, IonCardContent, IonLabel, IonItem, IonInput, IonGrid, IonRow, IonCol, IonIcon, IonButton, IonImg } from '@ionic/react';\nimport { trash, save, camera, cameraReverse } from 'ionicons/icons';\nimport { beansDataFileName } from '../objects/filenames';\nimport { storeData } from '../backend/data';\nimport { useCamera, availableFeatures } from '@ionic/react-hooks/camera';\nimport { CameraResultType } from '@capacitor/core'; //import './add-items.css'\n//Need to change FileName in the call of saveit (button press)\n\nexport const AddItems = array => {\n  const [newArray, setNewArray] = useState(array.map((arrayItem, index) => arrayItem.concat([index, '']))); //let newArray = array.map((arrayItem, index) => arrayItem.concat([index, '']))\n  // example of arrray ['Bean', true, 0, '']\n  // => Bean is the field title; true if it should be displayed; 0 is the index; '' will be filled with content eg. Malabar \n\n  console.log(newArray);\n  const [inputValues, setInputValues] = useState(JSON.parse(JSON.stringify(newArray)));\n  let {\n    photo,\n    getPhoto\n  } = useCamera();\n  const [myPhoto, setMyPhoto] = useState(photo);\n\n  const handleTakePhoto = async () => {\n    if (availableFeatures.getPhoto) {\n      await getPhoto({\n        quality: 100,\n        allowEditing: false,\n        resultType: CameraResultType.DataUrl,\n        height: 1000\n      }); //setMyPhoto(photo)\n      //console.log('photo', photo)\n    }\n  };\n\n  useEffect(() => setMyPhoto(photo), [photo]);\n\n  const delFunc = () => {\n    //console.log('newarray1:',newArray)\n    setInputValues(inputValues.map(arrayItem => arrayItem.splice(0, 3).concat([''])));\n    setMyPhoto(undefined); //console.log('newarray2:',newArray)\n  };\n\n  const saveIt = async (fileName, array, photo) => {\n    // https://stackoverflow.com/questions/42974735/create-object-from-array\n    const objectToSave = array.reduce((o, arrayItem) => ({ ...o,\n      [arrayItem[0]]: arrayItem[3]\n    }), {});\n    await storeData(fileName, objectToSave, photo);\n    delFunc();\n  }; //debugger\n\n\n  console.log('newarray1:', newArray);\n  const result = newArray.filter(arrayItem => arrayItem[1]).map(arrayItem => /*#__PURE__*/React.createElement(IonItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, console.log('newarray2:', newArray), /*#__PURE__*/React.createElement(IonInput, {\n    placeholder: arrayItem[0],\n    name: arrayItem[0],\n    id: arrayItem[2],\n    value: arrayItem[3],\n    onIonChange: e => {\n      inputValues[e.target.id][3] = e.detail.value;\n      setInputValues(inputValues);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  })));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(IonGrid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, myPhoto && /*#__PURE__*/React.createElement(IonImg, {\n    height: \"200px\",\n    src: myPhoto.dataUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 26\n    }\n  }))), /*#__PURE__*/React.createElement(IonRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    color: \"dark\",\n    onClick: () => handleTakePhoto(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonIcon, {\n    slot: \"icon-only\",\n    src: myPhoto ? cameraReverse : camera,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }))))), result, /*#__PURE__*/React.createElement(IonGrid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    color: \"dark\",\n    routerLink: \"./Show-beans\",\n    onClick: () => saveIt(beansDataFileName, inputValues, myPhoto),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonIcon, {\n    icon: save,\n    slot: \"icon-only\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(IonCol, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    color: \"dark\",\n    onClick: () => delFunc(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonIcon, {\n    icon: trash,\n    slot: \"icon-only\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }))))));\n};","map":{"version":3,"sources":["/mnt/Data/Javascript_code/Ionic/coffe-db/src/components/frontend/add-items.js"],"names":["React","useState","useEffect","IonPage","IonCard","IonHeader","IonToolbar","IonBackButton","IonContent","IonTitle","IonButtons","IonTextarea","IonCardContent","IonLabel","IonItem","IonInput","IonGrid","IonRow","IonCol","IonIcon","IonButton","IonImg","trash","save","camera","cameraReverse","beansDataFileName","storeData","useCamera","availableFeatures","CameraResultType","AddItems","array","newArray","setNewArray","map","arrayItem","index","concat","console","log","inputValues","setInputValues","JSON","parse","stringify","photo","getPhoto","myPhoto","setMyPhoto","handleTakePhoto","quality","allowEditing","resultType","DataUrl","height","delFunc","splice","undefined","saveIt","fileName","objectToSave","reduce","o","result","filter","e","target","id","detail","value","dataUrl"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useState, useEffect } from 'react'\n\nimport { IonPage, IonCard, IonHeader, IonToolbar, IonBackButton, IonContent, IonTitle, IonButtons, IonTextarea,\n    IonCardContent, IonLabel, IonItem, IonInput, IonGrid, IonRow, IonCol, IonIcon, IonButton, IonImg} from '@ionic/react'\n\nimport { trash, save, camera, cameraReverse} from 'ionicons/icons'\n\nimport { beansDataFileName } from '../objects/filenames'\nimport { storeData } from '../backend/data'\n\nimport { useCamera, availableFeatures } from '@ionic/react-hooks/camera';\nimport { CameraResultType } from '@capacitor/core'\n\n//import './add-items.css'\n\n\n//Need to change FileName in the call of saveit (button press)\nexport const AddItems = (array) => {\n\n    const [newArray, setNewArray] = useState(array.map((arrayItem, index) => arrayItem.concat([index, ''])))\n    //let newArray = array.map((arrayItem, index) => arrayItem.concat([index, '']))\n    // example of arrray ['Bean', true, 0, '']\n    // => Bean is the field title; true if it should be displayed; 0 is the index; '' will be filled with content eg. Malabar \n    console.log(newArray)\n\n    const [inputValues, setInputValues] = useState(JSON.parse(JSON.stringify(newArray)) )\n\n    let { photo, getPhoto} = useCamera();\n    const  [ myPhoto, setMyPhoto ] = useState(photo)\n\n    const handleTakePhoto = async () => {\n        if(availableFeatures.getPhoto) {\n         await getPhoto({\n            quality: 100,\n            allowEditing: false,\n            resultType: CameraResultType.DataUrl,\n            height: 1000\n            })\n        //setMyPhoto(photo)\n        //console.log('photo', photo)\n        }\n    }\n\n    useEffect(() => setMyPhoto(photo), [photo])\n\n    const delFunc = () => {\n        //console.log('newarray1:',newArray)\n        setInputValues(inputValues.map(arrayItem => arrayItem.splice(0,3).concat([''])))\n        setMyPhoto(undefined)\n        //console.log('newarray2:',newArray)\n    }\n\n    const saveIt = async (fileName, array, photo) => {\n\n        // https://stackoverflow.com/questions/42974735/create-object-from-array\n        const objectToSave = array.reduce(( o, arrayItem) => ({...o, [arrayItem[0]]:arrayItem[3] }) , {})\n        await storeData(fileName, objectToSave, photo)\n        delFunc()\n    }\n    \n    //debugger\n    console.log('newarray1:',newArray)\n    const result = newArray.filter(arrayItem => arrayItem[1])\n                        .map((arrayItem) => \n        <IonItem>\n            {console.log('newarray2:',newArray)}\n            <IonInput placeholder={arrayItem[0]}\n                name={arrayItem[0]}\n                id={arrayItem[2]}\n                value={arrayItem[3]}\n                onIonChange={ e => {inputValues[e.target.id][3]=e.detail.value; setInputValues(inputValues) }}\n            ></IonInput>\n        </IonItem>  \n        )\n    return(<>\n    <IonGrid>\n        <IonRow>\n            <IonCol>\n            { myPhoto && <IonImg height='200px' src={myPhoto.dataUrl} />}\n            </IonCol>\n        </IonRow>\n        <IonRow>\n            <IonCol>\n            <IonButton color='dark'\n                onClick={() => handleTakePhoto()}>\n                <IonIcon slot='icon-only' src={myPhoto ? cameraReverse : camera}/>\n            </IonButton>\n            </IonCol>\n        </IonRow>\n    </IonGrid>\n    {result}\n    <IonGrid>\n        <IonRow>\n            <IonCol>\n                <IonButton color='dark'\n                        routerLink='./Show-beans'\n                        onClick={() => saveIt(beansDataFileName, inputValues, myPhoto)} >\n                    <IonIcon icon={save} slot='icon-only'/>\n                </IonButton>\n            </IonCol>\n            <IonCol>\n            <IonButton color='dark'\n                onClick={ () => delFunc()}>\n                    <IonIcon icon={trash} slot='icon-only'/>\n                </IonButton>\n            </IonCol>\n        </IonRow>\n    </IonGrid>\n\n    </>\n    )\n}\n\n"]},"metadata":{},"sourceType":"module"}