{"ast":null,"code":"import _defineProperty from\"/mnt/Data/Javascript_code/Ionic/coffee-db4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/mnt/Data/Javascript_code/Ionic/coffee-db4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/mnt/Data/Javascript_code/Ionic/coffee-db4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/mnt/Data/Javascript_code/Ionic/coffee-db4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/mnt/Data/Javascript_code/Ionic/coffee-db4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import{IonLabel,IonItem,IonInput,IonGrid,IonRow,IonCol,IonIcon,IonButton,IonImg,IonSelect,IonSelectOption}from'@ionic/react';import{trash,save,camera,cameraReverse}from'ionicons/icons';import{storeData,readPicture}from'../backend/data';import{store}from'../backend/store';import{useCamera,availableFeatures}from'@ionic/react-hooks/camera';import{CameraResultType}from'@capacitor/core';export var AddItems=function AddItems(fileName,type){console.log('******************* ADD-ITEMS *******************');var globalState=useContext(store);var state=globalState.state,dispatch=globalState.dispatch;var _useState=useState(state[type].settings.map(function(arrayItem,index){return arrayItem.concat([index,'']);})),_useState2=_slicedToArray(_useState,2),newArray=_useState2[0],setNewArray=_useState2[1];var dataString='set'+type.charAt(0).toUpperCase()+type.slice(1)+'Data';//returns either 'setBeansData' or 'setBrewsData'\nvar pictureString='set'+type.charAt(0).toUpperCase()+type.slice(1)+'Pics';// example of arrray ['Bean', true, 0, '']\n// => Bean is the field title; true if it should be displayed; 0 is the index; '' will be filled with content eg. Malabar \nvar _useState3=useState(JSON.parse(JSON.stringify(newArray))),_useState4=_slicedToArray(_useState3,2),inputValues=_useState4[0],setInputValues=_useState4[1];var _useCamera=useCamera(),photo=_useCamera.photo,getPhoto=_useCamera.getPhoto;var _useState5=useState(photo),_useState6=_slicedToArray(_useState5,2),myPhoto=_useState6[0],setMyPhoto=_useState6[1];var handleTakePhoto=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var pic;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!availableFeatures.getPhoto){_context.next=4;break;}_context.next=3;return getPhoto({quality:100,allowEditing:false,resultType:CameraResultType.DataUrl,height:1000});case 3:pic=_context.sent;case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleTakePhoto(){return _ref.apply(this,arguments);};}();useEffect(function(){return setMyPhoto(photo);},[photo]);var delFunc=function delFunc(){setInputValues(inputValues.map(function(arrayItem){return arrayItem.splice(0,3).concat(['']);}));setMyPhoto(undefined);};var saveIt=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fileName,array,photo,type){var objectToSave,objectWithID,folder,pathToPhoto;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// https://stackoverflow.com/questions/42974735/create-object-from-array\nobjectToSave=array.reduce(function(o,arrayItem){return _objectSpread({},o,_defineProperty({},arrayItem[0],arrayItem[3]));},{});_context2.next=3;return storeData(fileName,objectToSave,photo);case 3:objectWithID=_context2.sent;state[type].data.push(objectWithID);dispatch({type:dataString,value:state[type].data});console.log('objwithid',objectWithID);console.log('STATE',state);console.log('pic state',state[type].pics[0]);if(!photo){_context2.next=17;break;}//if no picture is done photo will be undefined\nfolder=fileName.split('/')[0];_context2.next=13;return readPicture(folder+'/'+objectWithID.id.toString()+'.jpeg');case 13:pathToPhoto=_context2.sent;if(pathToPhoto){state[type].pics[0][objectWithID.id]=pathToPhoto;}_context2.next=18;break;case 17:state[type].pics[0][objectWithID.id]=false;case 18:dispatch({type:pictureString,value:state[type].pics});delFunc();case 20:case\"end\":return _context2.stop();}}},_callee2);}));return function saveIt(_x,_x2,_x3,_x4){return _ref2.apply(this,arguments);};}();var result=inputValues.filter(function(arrayItem){return arrayItem[1];}).map(function(arrayItem){if(type==='brews'&&state.beans.settings.filter(function(line){return line[0]===arrayItem[0]&&line[1];}).length>0&&arrayItem[0]!=='Kommentar'){return/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\",color:\"medium\"},/*#__PURE__*/React.createElement(\"h1\",null,arrayItem[0],\":\")),/*#__PURE__*/React.createElement(IonSelect,{name:arrayItem[0],id:arrayItem[2],value:arrayItem[3],onIonChange:function onIonChange(e){inputValues[e.target.id][3]=e.detail.value;setInputValues(inputValues);console.log(inputValues);}},state.beans.data.filter(function(line){return line[arrayItem[0]]!==''&&line[arrayItem[0]]!==undefined;}).map(function(line){return/*#__PURE__*/React.createElement(IonSelectOption,{value:line[arrayItem[0]]},line[arrayItem[0]]);})));}else{return/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\",color:\"medium\"},/*#__PURE__*/React.createElement(\"h1\",null,arrayItem[0],\":\")),/*#__PURE__*/React.createElement(IonInput,{name:arrayItem[0],id:arrayItem[2],value:arrayItem[3],onIonChange:function onIonChange(e){inputValues[e.target.id][3]=e.detail.value;setInputValues(inputValues);console.log(inputValues);}}));}});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(IonGrid,null,/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,null,myPhoto&&/*#__PURE__*/React.createElement(IonImg,{height:\"200px\",src:myPhoto.dataUrl}))),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,null,/*#__PURE__*/React.createElement(IonButton,{color:\"dark\",onClick:function onClick(){return handleTakePhoto();}},/*#__PURE__*/React.createElement(IonIcon,{slot:\"icon-only\",src:myPhoto?cameraReverse:camera}))))),result,/*#__PURE__*/React.createElement(IonGrid,null,/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,null,/*#__PURE__*/React.createElement(IonButton,{color:\"dark\",routerLink:\"./Show-beans\",onClick:function onClick(){return saveIt(fileName,inputValues,myPhoto,type);}},/*#__PURE__*/React.createElement(IonIcon,{icon:save,slot:\"icon-only\"}))),/*#__PURE__*/React.createElement(IonCol,null,/*#__PURE__*/React.createElement(IonButton,{color:\"dark\",onClick:function onClick(){return delFunc();}},/*#__PURE__*/React.createElement(IonIcon,{icon:trash,slot:\"icon-only\"}))))));};","map":{"version":3,"sources":["/mnt/Data/Javascript_code/Ionic/coffee-db4/src/components/frontend/add-items.js"],"names":["React","useState","useEffect","useContext","IonLabel","IonItem","IonInput","IonGrid","IonRow","IonCol","IonIcon","IonButton","IonImg","IonSelect","IonSelectOption","trash","save","camera","cameraReverse","storeData","readPicture","store","useCamera","availableFeatures","CameraResultType","AddItems","fileName","type","console","log","globalState","state","dispatch","settings","map","arrayItem","index","concat","newArray","setNewArray","dataString","charAt","toUpperCase","slice","pictureString","JSON","parse","stringify","inputValues","setInputValues","photo","getPhoto","myPhoto","setMyPhoto","handleTakePhoto","quality","allowEditing","resultType","DataUrl","height","pic","delFunc","splice","undefined","saveIt","array","objectToSave","reduce","o","objectWithID","data","push","value","pics","folder","split","id","toString","pathToPhoto","result","filter","beans","line","length","e","target","detail","dataUrl"],"mappings":"myBAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,CAAoCC,UAApC,KAAsD,OAAtD,CAEA,OAASC,QAAT,CAAmBC,OAAnB,CAA4BC,QAA5B,CAAsCC,OAAtC,CAA+CC,MAA/C,CAAuDC,MAAvD,CAA+DC,OAA/D,CAAwEC,SAAxE,CAAmFC,MAAnF,CAA2FC,SAA3F,CAAsGC,eAAtG,KAA4H,cAA5H,CAEA,OAASC,KAAT,CAAgBC,IAAhB,CAAsBC,MAAtB,CAA8BC,aAA9B,KAAkD,gBAAlD,CAEA,OAASC,SAAT,CAAoBC,WAApB,KAAuC,iBAAvC,CACA,OAASC,KAAT,KAAsB,kBAAtB,CAGA,OAASC,SAAT,CAAoBC,iBAApB,KAA6C,2BAA7C,CACA,OAASC,gBAAT,KAAiC,iBAAjC,CAGA,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,QAAD,CAAWC,IAAX,CAAoB,CACxCC,OAAO,CAACC,GAAR,CAAY,mDAAZ,EACA,GAAMC,CAAAA,WAAW,CAAG3B,UAAU,CAACkB,KAAD,CAA9B,CAFwC,GAGhCU,CAAAA,KAHgC,CAGZD,WAHY,CAGhCC,KAHgC,CAGzBC,QAHyB,CAGZF,WAHY,CAGzBE,QAHyB,eAKR/B,QAAQ,CAAC8B,KAAK,CAACJ,IAAD,CAAL,CAAYM,QAAZ,CAAqBC,GAArB,CAAyB,SAACC,SAAD,CAAYC,KAAZ,QAAsBD,CAAAA,SAAS,CAACE,MAAV,CAAiB,CAACD,KAAD,CAAQ,EAAR,CAAjB,CAAtB,EAAzB,CAAD,CALA,wCAKjCE,QALiC,eAKvBC,WALuB,eAQxC,GAAMC,CAAAA,UAAU,CAAG,MAAQb,IAAI,CAACc,MAAL,CAAY,CAAZ,EAAeC,WAAf,EAAR,CAAuCf,IAAI,CAACgB,KAAL,CAAW,CAAX,CAAvC,CAAuD,MAA1E,CAAiF;AACjF,GAAMC,CAAAA,aAAa,CAAG,MAAQjB,IAAI,CAACc,MAAL,CAAY,CAAZ,EAAeC,WAAf,EAAR,CAAuCf,IAAI,CAACgB,KAAL,CAAW,CAAX,CAAvC,CAAuD,MAA7E,CAEA;AACA;AAZwC,eAcF1C,QAAQ,CAAC4C,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeT,QAAf,CAAX,CAAD,CAdN,yCAcjCU,WAdiC,eAcpBC,cAdoB,8BAgBd3B,SAAS,EAhBK,CAgBlC4B,KAhBkC,YAgBlCA,KAhBkC,CAgB3BC,QAhB2B,YAgB3BA,QAhB2B,gBAiBPlD,QAAQ,CAACiD,KAAD,CAjBD,yCAiB/BE,OAjB+B,eAiBtBC,UAjBsB,eAmBxC,GAAMC,CAAAA,eAAe,0FAAG,+IACjB/B,iBAAiB,CAAC4B,QADD,+CAEGA,CAAAA,QAAQ,CAAC,CAC5BI,OAAO,CAAE,GADmB,CAE5BC,YAAY,CAAE,KAFc,CAG5BC,UAAU,CAAEjC,gBAAgB,CAACkC,OAHD,CAI5BC,MAAM,CAAE,IAJoB,CAAD,CAFX,QAEVC,GAFU,qEAAH,kBAAfN,CAAAA,eAAe,0CAArB,CAWApD,SAAS,CAAC,iBAAMmD,CAAAA,UAAU,CAACH,KAAD,CAAhB,EAAD,CAA0B,CAACA,KAAD,CAA1B,CAAT,CAEA,GAAMW,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CAElBZ,cAAc,CAACD,WAAW,CAACd,GAAZ,CAAgB,SAAAC,SAAS,QAAIA,CAAAA,SAAS,CAAC2B,MAAV,CAAiB,CAAjB,CAAmB,CAAnB,EAAsBzB,MAAtB,CAA6B,CAAC,EAAD,CAA7B,CAAJ,EAAzB,CAAD,CAAd,CAEAgB,UAAU,CAACU,SAAD,CAAV,CAEH,CAND,CAQA,GAAMC,CAAAA,MAAM,2FAAG,kBAAOtC,QAAP,CAAiBuC,KAAjB,CAAwBf,KAAxB,CAA+BvB,IAA/B,uKAEX;AACMuC,YAHK,CAGUD,KAAK,CAACE,MAAN,CAAa,SAAEC,CAAF,CAAKjC,SAAL,0BAAwBiC,CAAxB,oBAA4BjC,SAAS,CAAC,CAAD,CAArC,CAA0CA,SAAS,CAAC,CAAD,CAAnD,IAAb,CAAyE,EAAzE,CAHV,wBAIgBhB,CAAAA,SAAS,CAACO,QAAD,CAAWwC,YAAX,CAAyBhB,KAAzB,CAJzB,QAILmB,YAJK,gBAMXtC,KAAK,CAACJ,IAAD,CAAL,CAAY2C,IAAZ,CAAiBC,IAAjB,CAAsBF,YAAtB,EACArC,QAAQ,CAAC,CAAEL,IAAI,CAAEa,UAAR,CAAoBgC,KAAK,CAAEzC,KAAK,CAACJ,IAAD,CAAL,CAAY2C,IAAvC,CAAD,CAAR,CAEA1C,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAwBwC,YAAxB,EACAzC,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAqBE,KAArB,EACAH,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAyBE,KAAK,CAACJ,IAAD,CAAL,CAAY8C,IAAZ,CAAiB,CAAjB,CAAzB,EAXW,IAYRvB,KAZQ,2BAYK;AACNwB,MAbC,CAaQhD,QAAQ,CAACiD,KAAT,CAAe,GAAf,EAAoB,CAApB,CAbR,yBAcmBvD,CAAAA,WAAW,CAACsD,MAAM,CAAG,GAAT,CAAeL,YAAY,CAACO,EAAb,CAAgBC,QAAhB,EAAf,CAA4C,OAA7C,CAd9B,SAcDC,WAdC,gBAgBP,GAAGA,WAAH,CAAe,CACX/C,KAAK,CAACJ,IAAD,CAAL,CAAY8C,IAAZ,CAAiB,CAAjB,EAAoBJ,YAAY,CAACO,EAAjC,EAAqCE,WAArC,CACH,CAlBM,gCAoBP/C,KAAK,CAACJ,IAAD,CAAL,CAAY8C,IAAZ,CAAiB,CAAjB,EAAoBJ,YAAY,CAACO,EAAjC,EAAqC,KAArC,CApBO,QAsBX5C,QAAQ,CAAC,CAACL,IAAI,CAAEiB,aAAP,CAAsB4B,KAAK,CAAEzC,KAAK,CAACJ,IAAD,CAAL,CAAY8C,IAAzC,CAAD,CAAR,CAEAZ,OAAO,GAxBI,yDAAH,kBAANG,CAAAA,MAAM,yDAAZ,CA2BA,GAAMe,CAAAA,MAAM,CAAG/B,WAAW,CAACgC,MAAZ,CAAmB,SAAA7C,SAAS,QAAIA,CAAAA,SAAS,CAAC,CAAD,CAAb,EAA5B,EACMD,GADN,CACU,SAACC,SAAD,CAAgB,CACrC,GAAIR,IAAI,GAAG,OAAP,EAAmBI,KAAK,CAACkD,KAAN,CAAYhD,QAAZ,CAAqB+C,MAArB,CAA6B,SAAAE,IAAI,QAAKA,CAAAA,IAAI,CAAC,CAAD,CAAJ,GAAY/C,SAAS,CAAC,CAAD,CAAtB,EAA8B+C,IAAI,CAAC,CAAD,CAAtC,EAAjC,EAA6EC,MAA7E,CAAsF,CAAzG,EAA8GhD,SAAS,CAAC,CAAD,CAAT,GAAiB,WAAnI,CAAgJ,CAE5I,mBACI,oBAAC,OAAD,mBACI,oBAAC,QAAD,EAAU,QAAQ,CAAC,SAAnB,CAA6B,KAAK,CAAC,QAAnC,eAA4C,8BAAKA,SAAS,CAAC,CAAD,CAAd,KAA5C,CADJ,cAEI,oBAAC,SAAD,EACJ,IAAI,CAAEA,SAAS,CAAC,CAAD,CADX,CAEJ,EAAE,CAAEA,SAAS,CAAC,CAAD,CAFT,CAGJ,KAAK,CAAEA,SAAS,CAAC,CAAD,CAHZ,CAIJ,WAAW,CAAG,qBAAAiD,CAAC,CAAI,CAACpC,WAAW,CAACoC,CAAC,CAACC,MAAF,CAAST,EAAV,CAAX,CAAyB,CAAzB,EAA4BQ,CAAC,CAACE,MAAF,CAASd,KAArC,CAA4CvB,cAAc,CAACD,WAAD,CAAd,CAA6BpB,OAAO,CAACC,GAAR,CAAYmB,WAAZ,EAAyB,CAJlH,EAMQjB,KAAK,CAACkD,KAAN,CAAYX,IAAZ,CAAiBU,MAAjB,CAAwB,SAAAE,IAAI,QAAIA,CAAAA,IAAI,CAAC/C,SAAS,CAAC,CAAD,CAAV,CAAJ,GAAsB,EAAtB,EAA4B+C,IAAI,CAAC/C,SAAS,CAAC,CAAD,CAAV,CAAJ,GAAuB4B,SAAvD,EAA5B,EAA8F7B,GAA9F,CAAkG,SAAAgD,IAAI,qBAClG,oBAAC,eAAD,EAAiB,KAAK,CAAEA,IAAI,CAAC/C,SAAS,CAAC,CAAD,CAAV,CAA5B,EAA6C+C,IAAI,CAAC/C,SAAS,CAAC,CAAD,CAAV,CAAjD,CADkG,EAAtG,CANR,CAFJ,CADJ,CAgBH,CAlBD,IAkBO,CACH,mBACJ,oBAAC,OAAD,mBACI,oBAAC,QAAD,EAAU,QAAQ,CAAC,SAAnB,CAA6B,KAAK,CAAC,QAAnC,eAA4C,8BAAKA,SAAS,CAAC,CAAD,CAAd,KAA5C,CADJ,cAEI,oBAAC,QAAD,EACI,IAAI,CAAEA,SAAS,CAAC,CAAD,CADnB,CAEI,EAAE,CAAEA,SAAS,CAAC,CAAD,CAFjB,CAGI,KAAK,CAAEA,SAAS,CAAC,CAAD,CAHpB,CAII,WAAW,CAAG,qBAAAiD,CAAC,CAAI,CAACpC,WAAW,CAACoC,CAAC,CAACC,MAAF,CAAST,EAAV,CAAX,CAAyB,CAAzB,EAA4BQ,CAAC,CAACE,MAAF,CAASd,KAArC,CAA4CvB,cAAc,CAACD,WAAD,CAAd,CAA6BpB,OAAO,CAACC,GAAR,CAAYmB,WAAZ,EAAyB,CAJ1H,EAFJ,CADI,CAUS,CACZ,CAhCU,CAAf,CAiCA,mBAAO,qDACP,oBAAC,OAAD,mBACI,oBAAC,MAAD,mBACI,oBAAC,MAAD,MACEI,OAAO,eAAI,oBAAC,MAAD,EAAQ,MAAM,CAAC,OAAf,CAAuB,GAAG,CAAEA,OAAO,CAACmC,OAApC,EADb,CADJ,CADJ,cAMI,oBAAC,MAAD,mBACI,oBAAC,MAAD,mBACA,oBAAC,SAAD,EAAW,KAAK,CAAC,MAAjB,CACI,OAAO,CAAE,yBAAMjC,CAAAA,eAAe,EAArB,EADb,eAEI,oBAAC,OAAD,EAAS,IAAI,CAAC,WAAd,CAA0B,GAAG,CAAEF,OAAO,CAAGlC,aAAH,CAAmBD,MAAzD,EAFJ,CADA,CADJ,CANJ,CADO,CAgBN8D,MAhBM,cAiBP,oBAAC,OAAD,mBACI,oBAAC,MAAD,mBACI,oBAAC,MAAD,mBACI,oBAAC,SAAD,EAAW,KAAK,CAAC,MAAjB,CACQ,UAAU,CAAC,cADnB,CAEQ,OAAO,CAAE,yBAAMf,CAAAA,MAAM,CAACtC,QAAD,CAAWsB,WAAX,CAAwBI,OAAxB,CAAiCzB,IAAjC,CAAZ,EAFjB,eAGI,oBAAC,OAAD,EAAS,IAAI,CAAEX,IAAf,CAAqB,IAAI,CAAC,WAA1B,EAHJ,CADJ,CADJ,cAQI,oBAAC,MAAD,mBACA,oBAAC,SAAD,EAAW,KAAK,CAAC,MAAjB,CACI,OAAO,CAAG,yBAAM6C,CAAAA,OAAO,EAAb,EADd,eAEQ,oBAAC,OAAD,EAAS,IAAI,CAAE9C,KAAf,CAAsB,IAAI,CAAC,WAA3B,EAFR,CADA,CARJ,CADJ,CAjBO,CAAP,CAoCH,CAxIM","sourcesContent":["import React, {useState, useEffect, useContext } from 'react'\n\nimport { IonLabel, IonItem, IonInput, IonGrid, IonRow, IonCol, IonIcon, IonButton, IonImg, IonSelect, IonSelectOption} from '@ionic/react'\n\nimport { trash, save, camera, cameraReverse} from 'ionicons/icons'\n\nimport { storeData, readPicture } from '../backend/data'\nimport { store } from '../backend/store'\n\n\nimport { useCamera, availableFeatures } from '@ionic/react-hooks/camera';\nimport { CameraResultType } from '@capacitor/core'\n\n\nexport const AddItems = (fileName, type) => {\n    console.log('******************* ADD-ITEMS *******************')\n    const globalState = useContext(store)\n    const { state, dispatch } = globalState\n\n    const [newArray, setNewArray] = useState(state[type].settings.map((arrayItem, index) => arrayItem.concat([index, ''])))\n    \n\n    const dataString = 'set' + type.charAt(0).toUpperCase() + type.slice(1) + 'Data' //returns either 'setBeansData' or 'setBrewsData'\n    const pictureString = 'set' + type.charAt(0).toUpperCase() + type.slice(1) + 'Pics'\n\n    // example of arrray ['Bean', true, 0, '']\n    // => Bean is the field title; true if it should be displayed; 0 is the index; '' will be filled with content eg. Malabar \n\n    const [inputValues, setInputValues] = useState(JSON.parse(JSON.stringify(newArray)) )\n\n    let { photo, getPhoto } = useCamera();\n    const  [ myPhoto, setMyPhoto ] = useState(photo)\n\n    const handleTakePhoto = async () => {\n        if(availableFeatures.getPhoto) {\n            const pic = await  getPhoto({\n            quality: 100,\n            allowEditing: false,\n            resultType: CameraResultType.DataUrl,\n            height: 1000\n            })\n        }\n    }\n\n    useEffect(() => setMyPhoto(photo), [photo])\n\n    const delFunc = () => {\n\n        setInputValues(inputValues.map(arrayItem => arrayItem.splice(0,3).concat([''])))\n\n        setMyPhoto(undefined)\n\n    }\n\n    const saveIt = async (fileName, array, photo, type) => {\n\n        // https://stackoverflow.com/questions/42974735/create-object-from-array\n        const objectToSave = array.reduce(( o, arrayItem) => ({...o, [arrayItem[0]]:arrayItem[3] }) , {})\n        const objectWithID = await storeData(fileName, objectToSave, photo)\n        \n        state[type].data.push(objectWithID)\n        dispatch({ type: dataString, value: state[type].data})\n\n        console.log('objwithid',objectWithID)\n        console.log('STATE', state)\n        console.log('pic state', state[type].pics[0])\n        if(photo){      //if no picture is done photo will be undefined\n            const folder = fileName.split('/')[0]\n            const pathToPhoto = await readPicture(folder + '/' + objectWithID.id.toString() + '.jpeg')\n\n            if(pathToPhoto){\n                state[type].pics[0][objectWithID.id]=pathToPhoto\n            }\n        } else {\n            state[type].pics[0][objectWithID.id]=false\n        }\n        dispatch({type: pictureString, value: state[type].pics})\n\n        delFunc()\n    }\n\n    const result = inputValues.filter(arrayItem => arrayItem[1])\n                        .map((arrayItem) =>  {\n        if (type==='brews' &&  state.beans.settings.filter( line => (line[0] === arrayItem[0]) && line[1] ).length > 0 && arrayItem[0] !== 'Kommentar') {\n\n            return (\n                <IonItem>\n                    <IonLabel position='stacked' color='medium'><h1>{arrayItem[0]}:</h1></IonLabel>\n                    <IonSelect \n                name={arrayItem[0]}\n                id={arrayItem[2]}\n                value={arrayItem[3]}\n                onIonChange={ e => {inputValues[e.target.id][3]=e.detail.value; setInputValues(inputValues); console.log(inputValues)}}>\n                        {\n                            state.beans.data.filter(line => line[arrayItem[0]] !=='' && line[arrayItem[0]] !== undefined).map(line => \n                                <IonSelectOption value={line[arrayItem[0]]}>{line[arrayItem[0]]}</IonSelectOption>)\n                        } \n\n                    </IonSelect>\n                </IonItem>\n            )\n        } else {\n            return(\n        <IonItem>\n            <IonLabel position='stacked' color='medium'><h1>{arrayItem[0]}:</h1></IonLabel>\n            <IonInput \n                name={arrayItem[0]}\n                id={arrayItem[2]}\n                value={arrayItem[3]}\n                onIonChange={ e => {inputValues[e.target.id][3]=e.detail.value; setInputValues(inputValues); console.log(inputValues)}}\n            ></IonInput>\n\n        </IonItem> )}  \n        })\n    return(<>\n    <IonGrid>\n        <IonRow>\n            <IonCol>\n            { myPhoto && <IonImg height='200px' src={myPhoto.dataUrl} />}\n            </IonCol>\n        </IonRow>\n        <IonRow>\n            <IonCol>\n            <IonButton color='dark'\n                onClick={() => handleTakePhoto()}>\n                <IonIcon slot='icon-only' src={myPhoto ? cameraReverse : camera}/>\n            </IonButton>\n            </IonCol>\n        </IonRow>\n    </IonGrid>\n    {result}\n    <IonGrid>\n        <IonRow>\n            <IonCol>\n                <IonButton color='dark'\n                        routerLink='./Show-beans'\n                        onClick={() => saveIt(fileName, inputValues, myPhoto, type)} >\n                    <IonIcon icon={save} slot='icon-only'/>\n                </IonButton>\n            </IonCol>\n            <IonCol>\n            <IonButton color='dark'\n                onClick={ () => delFunc()}>\n                    <IonIcon icon={trash} slot='icon-only'/>\n                </IonButton>\n            </IonCol>\n        </IonRow>\n    </IonGrid>\n    </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}