{"ast":null,"code":"import React, { useContext, useState, useEffect } from 'react';\nimport { readData, readSettings } from './data';\nimport { beansDefault, brewsDefault } from '../objects/default-values';\nimport { beansSettingsFileName, beansDataFileName, brewsSettingsFileName, brewsDataFileName } from '../objects/filenames';\nimport { createTable } from '../frontend/create-table.js';\nimport { store } from './store';\nexport const LoadData = () => {\n  const globalState = useContext(store);\n  const {\n    state,\n    dispatch\n  } = globalState;\n  let isLoaded = false;\n  let beansSettings;\n  let brewsSettings;\n  let beansData;\n  let brewsData;\n  let beansPics;\n  let brewsPics;\n  useEffect(() => {\n    const loadAsync = async () => {\n      //   console.log('im in async func')\n      // Settings Beans\n      const beansSettingsRaw = await readSettings(beansSettingsFileName);\n\n      if (beansSettingsRaw) {\n        beansSettings = JSON.parse(beansSettingsRaw);\n      } else {\n        beansSettings = beansDefault;\n      } // Settings Brews\n\n\n      const brewsSettingsRaw = await readSettings(brewsSettingsFileName);\n\n      if (brewsSettingsRaw) {\n        brewsSettings = JSON.parse(brewsSettingsRaw);\n      } else {\n        brewsSettings = brewsDefault;\n      } // Data Beans\n\n\n      const rawDataBeans = await readData(beansDataFileName);\n\n      if (rawDataBeans) {\n        beansData = createTable(rawDataBeans);\n      } else {\n        beansData = [];\n      } // Data Brews\n\n\n      const rawDataBrews = await readData(brewsDataFileName);\n\n      if (rawDataBrews) {\n        brewsData = createTable(rawDataBrews);\n      } else {\n        brewsData = [];\n      } // Pics Beans\n      // Pics Brews\n      //  console.log('end of async func')\n\n\n      isLoaded = true; //  console.log('isloade', isLoaded)\n\n      dispatch({\n        type: 'setBeansSettings',\n        value: beansSettings\n      });\n      dispatch({\n        type: 'setBeansData',\n        value: beansData\n      });\n      dispatch({\n        type: 'setBrewsSettings',\n        value: brewsSettings\n      });\n      dispatch({\n        type: 'setBrewsData',\n        value: brewsData\n      }); //  console.log('BeansSettingsDespatch:', state.beans.settings)\n\n      console.log('BeansDataDespatched', state.beans.data);\n      console.log('BREWS::', state.brews.settings);\n      console.log(\"loadAsync -> brewsSettings\", brewsSettings);\n    };\n\n    loadAsync(); //  console.log('i m after async func')\n  }, []);\n};","map":{"version":3,"sources":["/mnt/Data/Javascript_code/Ionic/coffee-db4/src/components/backend/loadData.js"],"names":["React","useContext","useState","useEffect","readData","readSettings","beansDefault","brewsDefault","beansSettingsFileName","beansDataFileName","brewsSettingsFileName","brewsDataFileName","createTable","store","LoadData","globalState","state","dispatch","isLoaded","beansSettings","brewsSettings","beansData","brewsData","beansPics","brewsPics","loadAsync","beansSettingsRaw","JSON","parse","brewsSettingsRaw","rawDataBeans","rawDataBrews","type","value","console","log","beans","data","brews","settings"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect} from 'react'\n\nimport { readData, readSettings } from './data'\nimport { beansDefault, brewsDefault } from '../objects/default-values'\nimport { beansSettingsFileName, beansDataFileName, brewsSettingsFileName, brewsDataFileName  } from '../objects/filenames'\nimport { createTable } from '../frontend/create-table.js'\nimport { store } from './store'\n\nexport const LoadData = () => {\n    const globalState = useContext(store)\n    const {state, dispatch } = globalState\n    let isLoaded = false \n\n    let beansSettings\n    let brewsSettings\n    let beansData\n    let brewsData\n    let beansPics \n    let brewsPics\n    \n\n    \n    useEffect( () => {\n\n    const loadAsync = async () => {\n     //   console.log('im in async func')\n        // Settings Beans\n        const beansSettingsRaw = await readSettings(beansSettingsFileName)\n        \n        if (beansSettingsRaw) {\n            beansSettings = JSON.parse(beansSettingsRaw)\n        } else {\n            beansSettings = beansDefault\n        }\n        \n        // Settings Brews\n        const brewsSettingsRaw = await readSettings(brewsSettingsFileName)\n        \n        if (brewsSettingsRaw) {\n          brewsSettings = JSON.parse(brewsSettingsRaw)\n        } else {\n          brewsSettings = brewsDefault\n          \n        }\n\n        // Data Beans\n        const rawDataBeans = await readData(beansDataFileName)\n        if (rawDataBeans) {\n          beansData = createTable(rawDataBeans)\n        } else {\n          beansData = []\n        }\n        // Data Brews\n        const rawDataBrews = await readData(brewsDataFileName)\n       if (rawDataBrews) { \n          brewsData = createTable(rawDataBrews)\n        } else {\n          brewsData = []\n        }\n\n        // Pics Beans\n\n        // Pics Brews\n\n\n\n      //  console.log('end of async func')\n        isLoaded = true\n      //  console.log('isloade', isLoaded)\n        dispatch({type: 'setBeansSettings', value: beansSettings})\n        dispatch({type: 'setBeansData', value: beansData})\n\n        dispatch({type: 'setBrewsSettings', value: brewsSettings})\n        dispatch({type: 'setBrewsData', value: brewsData})\n      //  console.log('BeansSettingsDespatch:', state.beans.settings)\n      console.log('BeansDataDespatched', state.beans.data)\n      console.log('BREWS::', state.brews.settings)\n      console.log(\"loadAsync -> brewsSettings\", brewsSettings)\n    }\n    loadAsync() \n  //  console.log('i m after async func')\n\n} , [])\n}\n\n\n"]},"metadata":{},"sourceType":"module"}